// Version: 3.5.MULTI
(function(){
var j=null,s=!1;function t(){return function(){}}
window.JSON&&window.JSON.stringify||function(){function a(){try{return this.valueOf()}catch(a){return j}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=p[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function b(d,G){var i,g,q,k,m,p=e,n=G[d];n&&"object"===typeof n&&(n=a.call(n));"function"===typeof f&&(n=f.call(G,d,n));switch(typeof n){case "string":return c(n);case "number":return isFinite(n)?String(n):"null";case "boolean":case "null":return String(n);
case "object":if(!n)return"null";e+=h;m=[];if("[object Array]"===Object.prototype.toString.apply(n)){k=n.length;for(i=0;i<k;i+=1)m[i]=b(i,n)||"null";q=0===m.length?"[]":e?"[\n"+e+m.join(",\n"+e)+"\n"+p+"]":"["+m.join(",")+"]";e=p;return q}if(f&&"object"===typeof f){k=f.length;for(i=0;i<k;i+=1)g=f[i],"string"===typeof g&&(q=b(g,n))&&m.push(c(g)+(e?": ":":")+q)}else for(g in n)Object.hasOwnProperty.call(n,g)&&(q=b(g,n))&&m.push(c(g)+(e?": ":":")+q);q=0===m.length?"{}":e?"{\n"+e+m.join(",\n"+e)+"\n"+
p+"}":"{"+m.join(",")+"}";e=p;return q}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,h,p={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},f;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,c,d){var g;h=e="";if("number"===typeof d)for(g=0;g<d;g+=1)h+=" ";else"string"===typeof d&&(h=d);if((f=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))throw Error("JSON.stringify");return b("",{"":a})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();var ca=1,u=s,da=[],x="-pnpres",ea=10,fa=310,ga=60,z=1E3,ma=/{([\w\-]+)}/g;function F(){return"x"+ ++ca+""+ +new Date}function H(){return+new Date}var O,P=Math.floor(20*Math.random());O=function(a,c){return 0<a.indexOf("pubsub.")&&a.replace("pubsub","ps"+(c?Q().split("-")[0]:20>++P?P:P=1))||a};
function na(a,c){function b(){e+c>H()?(clearTimeout(d),d=setTimeout(b,c)):(e=H(),a())}var d,e=0;return b}function oa(a,c){var b=[];R(a||[],function(a){c(a)&&b.push(a)});return b}function pa(a,c){return a.replace(ma,function(a,d){return c[d]||a})}function Q(a){var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var c=16*Math.random()|0;return("x"==a?c:c&3|8).toString(16)});a&&a(c);return c}
function R(a,c){if(a&&c)if("undefined"!=typeof a[0])for(var b=0,d=a.length;b<d;)c.call(a[b],a[b],b++);else for(b in a)a.hasOwnProperty&&a.hasOwnProperty(b)&&c.call(a[b],b,a[b])}function S(a,c){var b=[];R(a||[],function(a,e){b.push(c(a,e))});return b}function qa(a){var c=[];R(a,function(a,d){d.h&&c.push(a)});return c.sort()}function ra(){setTimeout(function(){u||(u=1,R(da,function(a){a()}))},z)}
function T(a){function c(){}function b(a){a&&(B.g=0);!B.g&&B.length&&(B.g=1,v(B.shift()))}function d(a){var b=0;R(qa(C),function(c){if(c=C[c])b++,(a||t())(c)});return b}function e(){Aa()||p(1,{error:"Offline. Please check your network settings. "});setTimeout(e,z)}function h(){w.time(function(a){f(t(),a);a||p(1,{error:"Heartbeat failed to connect to Pubnub Servers.Please check your network settings."});setTimeout(h,i)})}function p(a,b){I&&I(a,b);I=j}function f(a,b){function c(b){b&&(aa=H()-(b/1E4+
(H()-d)/2),a&&a(aa))}var d=H();b&&c(b)||w.time(c)}var r=+a.windowing||ea,G=(+a.timeout||fa)*z,i=(+a.keepalive||ga)*z,g=a.noleave||0,q=a.publish_key||"demo",k=a.subscribe_key||"demo",m=a.auth_key||"",A=a.secret_key||"",n=a.PNSDK||"",U=a.hmac_SHA256,J=a.ssl?"s":"",V=a.origin,M="http"+J+"://"+V,D=O(M),ha=O(M),B=[],aa=0,ia=0,ja=0,I=0,ba=0,K=0,C={},v=a.xdr,l=a.error||t(),Aa=a._is_online||function(){return 1},y=a.jsonp_cb||function(){return 0},L=a.db||{get:t(),set:t()},E=a.uuid||L&&L.get(k+"uuid")||"",
w={LEAVE:function(a,b){var c={uuid:E,auth:m},d=O(M),e=y();!(0<a.indexOf(x))&&(!g&&J&&"0"!=e)&&("0"!=e&&(c.callback=e),v({i:b||J,timeout:2E3,a:e,data:c,url:[d,"v2","presence","sub_key",k,"channel",encodeURIComponent(a),"leave"]}))},history:function(a,b){var b=a.callback||b,c=a.count||a.limit||100,d=a.reverse||"false",e=a.error||t(),q=a.auth_key||m,f=a.channel,N=a.start,g=a.end,h={},r=y();if(!f)return l("Missing Channel");if(!b)return l("Missing Callback");if(!k)return l("Missing Subscribe Key");h.stringtoken=
"true";h.count=c;h.reverse=d;h.auth=q;r&&(h.callback=r);N&&(h.start=N);g&&(h.end=g);v({a:r,data:h,c:function(a){"object"==typeof a&&a.error?e(a):b(a)},b:e,url:[D,"v2","history","sub-key",k,"channel",encodeURIComponent(f)]})},replay:function(a){var b=b||a.callback||t(),c=a.auth_key||m,d=a.source,e=a.destination,h=a.stop,f=a.start,N=a.end,g=a.reverse,a=a.limit,r=y(),i={};if(!d)return l("Missing Source Channel");if(!e)return l("Missing Destination Channel");if(!q)return l("Missing Publish Key");if(!k)return l("Missing Subscribe Key");
"0"!=r&&(i.callback=r);h&&(i.stop="all");g&&(i.reverse="true");f&&(i.start=f);N&&(i.end=N);a&&(i.count=a);i.auth=c;v({a:r,c:function(a){"object"==typeof a&&a.error?err(a):b(a)},b:function(){b([0,"Disconnected"])},url:[D,"v1","replay",q,k,d,e],data:i})},auth:function(a){m=a;c()},time:function(a){var b=y();v({a:b,data:{uuid:E,auth:m},timeout:5*z,url:[D,"time",b],c:function(b){a(b[0])},b:function(){a(0)}})},publish:function(a,c){var c=c||a.callback||t(),d=a.message,e=a.channel,h=a.auth_key||m,f=a.error||
t(),r=y();if(!d)return l("Missing Message");if(!e)return l("Missing Channel");if(!q)return l("Missing Publish Key");if(!k)return l("Missing Subscribe Key");d=JSON.stringify(d);B.push({a:r,timeout:5*z,url:[D,"publish",q,k,0,encodeURIComponent(e),r,encodeURIComponent(d)],data:{uuid:E,auth:h},b:function(a){f(a);b(1)},c:function(a){"object"==typeof a&&a.error?f(a):c(a);b(1)}});b()},unsubscribe:function(a){a=a.channel;K=0;ba=1;a=S((a.join?a.join(","):""+a).split(","),function(a){return a+","+a+x}).join(",");
R(a.split(","),function(a){u&&w.LEAVE(a,0);C[a]=0});c()},subscribe:function(a,b){function e(a){a?setTimeout(c,z):(D=O(M,1),ha=O(M,1),setTimeout(function(){w.time(e)},z));d(function(b){if(a&&b.d)return b.d=0,b.l(b.name);!a&&!b.d&&(b.d=1,b.k(b.name))})}function h(){var a=y(),b=qa(C).join(",");b&&(p(),I=v({timeout:V,a:a,b:function(a){ka(a);I=j;w.time(e)},data:{uuid:E,auth:q},url:[ha,"subscribe",k,encodeURIComponent(b),a,K],c:function(a){I=j;if(!a||"object"==typeof a&&"error"in a&&a.error)return ka(a),
setTimeout(c,z);Ba(a[1]);K=!K&&ba&&L.get(k)||a[1];d(function(a){a.e||(a.e=1,a.j(a.name))});J&&(K=1E4,J=0);L.set(k,a[1]);var b,e=(2<a.length?a[2]:S(C,function(b){return S(Array(a[0].length).join(",").split(","),function(){return b})}).join(",")).split(",");b=function(){var a=e.shift()||ja;return[(C[a]||{}).a||ia,a.split(x)[0]]};var f=H()-aa-+a[1]/1E4;R(a[0],function(c){var d=b();d[0](c,a,d[1],f)});setTimeout(h,la)}}))}var f=a.channel,b=(b=b||a.callback)||a.message,q=a.auth_key||m,i=a.connect||t(),
g=a.reconnect||t(),n=a.disconnect||t(),ka=a.error||t(),Ba=a.idle||t(),A=a.presence||0,B=a.noheresync||0,J=a.backfill||0,U=a.timetoken||0,V=a.timeout||G,la=a.windowing||r;ba=a.restore;K=U;if(!f)return l("Missing Channel");if(!b)return l("Missing Callback");if(!k)return l("Missing Subscribe Key");R((f.join?f.join(","):""+f).split(","),function(a){var c=C[a]||{};C[ja=a]={name:a,e:c.e,d:c.d,h:1,a:ia=b,j:i,k:n,l:g};A&&(w.subscribe({channel:a+x,callback:A}),!c.h&&!B&&w.here_now({channel:a,callback:function(b){R("uuids"in
b?b.uuids:[],function(c){A({action:"join",uuid:c,timestamp:H(),occupancy:b.occupancy||1},b,a)})}}))});c=function(){p();setTimeout(h,la)};if(!u)return da.push(c);c()},here_now:function(a,b){var b=a.callback||b,c=a.error||t(),d=a.auth_key||m,e=a.channel,f=y(),d={uuid:E,auth:d};if(!e)return l("Missing Channel");if(!b)return l("Missing Callback");if(!k)return l("Missing Subscribe Key");"0"!=f&&(d.callback=f);v({a:f,data:d,c:function(a){"object"==typeof a&&a.error?c(a):b(a)},b:c,url:[D,"v2","presence",
"sub_key",k,"channel",encodeURIComponent(e)]})},grant:function(a,b){var b=a.callback||b,c=a.error||t(),d=a.channel,e=y(),f=a.ttl||-1,h=a.read?"1":"0",r=a.write?"1":"0",i=a.auth_key;if(!d)return l("Missing Channel");if(!b)return l("Missing Callback");if(!k)return l("Missing Subscribe Key");if(!q)return l("Missing Publish Key");if(!A)return l("Missing Secret Key");"0"!=e&&(g.callback=e);var g=Math.floor((new Date).getTime()/1E3),m=U(k+"\n"+q+"\ngrant\n"+(i&&0<encodeURIComponent(i).length?"auth="+encodeURIComponent(i)+
"&":"")+"channel="+encodeURIComponent(d)+"&pnsdk="+encodeURIComponent(n)+"&r="+h+"&timestamp="+encodeURIComponent(g)+(-1<f?"&ttl="+f:"")+"&w="+r,A),m=m.replace(/\+/g,"-"),m=m.replace(/\//g,"_"),g={w:r,r:h,signature:m,channel:encodeURIComponent(d),timestamp:g};-1<f&&(g.ttl=f);i&&(g.auth=encodeURIComponent(i));v({a:e,data:g,c:function(a){b(a)},b:c,url:[D,"v1","auth","grant","sub-key",k]})},audit:function(a,b){var b=a.callback||b,c=a.error||t(),d=a.channel,e=a.auth_key,f=y();if(!b)return l("Missing Callback");
if(!k)return l("Missing Subscribe Key");if(!q)return l("Missing Publish Key");if(!A)return l("Missing Secret Key");"0"!=f&&(h.callback=f);var h=Math.floor((new Date).getTime()/1E3),g=k+"\n"+q+"\naudit\n";e&&(g+="auth="+encodeURIComponent(e)+"&");d&&(g+="channel="+encodeURIComponent(d)+"&");var g=g+("pnsdk="+encodeURIComponent(n)+"&timestamp="+h),g=U(g,A),g=g.replace(/\+/g,"-"),g=g.replace(/\//g,"_"),h={signature:g,timestamp:h};d&&(h.channel=encodeURIComponent(d));e&&(h.auth=encodeURIComponent(e));
v({a:f,data:h,c:function(a){b(a)},b:c,url:[D,"v1","auth","audit","sub-key",k]})},revoke:function(a,b){a.read=s;a.write=s;w.grant(a,b)},origin:function(){return V},xdr:v,ready:ra,db:L,uuid:Q,map:S,each:R,"each-channel":d,grep:oa,offline:function(){p(1)},supplant:pa,now:H,unique:F,updater:na};E||(E=w.uuid());L.set(k+"uuid",E);setTimeout(e,z);setTimeout(h,i);f();return w}
if(!window.PUBNUB){var sa=function(a){return document.getElementById(a)},ta=function(a){console.error(a)},ua=function(a,c){var b=[];R(a.split(/\s+/),function(a){R((c||document).getElementsByTagName(a),function(a){b.push(a)})});return b},W=function(a,c,b){R(a.split(","),function(a){function e(a){a||(a=window.event);b(a)||(a.cancelBubble=!0,a.returnValue=s,a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation())}c.addEventListener?c.addEventListener(a,e,s):c.attachEvent?c.attachEvent("on"+
a,e):c["on"+a]=e})},va=function(){return ua("head")[0]},X=function(a,c,b){if(b)a.setAttribute(c,b);else return a&&a.getAttribute&&a.getAttribute(c)},wa=function(a,c){for(var b in c)if(c.hasOwnProperty(b))try{a.style[b]=c[b]+(0<"|width|height|top|left|".indexOf(b)&&"number"==typeof c[b]?"px":"")}catch(d){}},xa=function(a){return document.createElement(a)},ya=function(){return F()},Da=function(a){function c(a,c){h||(h=1,b.onerror=j,clearTimeout(p),a||!c||G(c),setTimeout(function(){a&&f();var b=sa(e),
c=b&&b.parentNode;c&&c.removeChild(b)},z))}var b=xa("script"),d=a.a,e=F(),h=0,p=setTimeout(function(){c(1)},a.timeout||1E4),f=a.b||t(),r=a.data||{},G=a.c||t();window[d]=function(a){c(0,a)};a.i||(b[za]=za);b.onerror=function(){c(1)};r.pnsdk=Ca;var a=a.url.join("/"),i=[];r&&(R(r,function(a,b){"undefined"!=typeof b&&(b!=j&&0<encodeURIComponent(b).length)&&i.push(a+"="+encodeURIComponent(b))}),a+="?"+i.join("&"));b.src=a;X(b,"id",e);va().appendChild(b);return c},Ea=function(){return!("onLine"in navigator)?
1:navigator.onLine},za="async",Ca="PubNub-JS-SmartTV/3.5.MULTI";window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||t());var Fa,Y=window.localStorage;Fa={get:function(a){try{return Y?Y.getItem(a):-1==document.cookie.indexOf(a)?j:((document.cookie||"").match(RegExp(a+"=([^;]+)"))||[])[1]||j}catch(c){}},set:function(a,c){try{if(Y)return Y.setItem(a,c)&&0;document.cookie=a+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(b){}}};
var Z={list:{},unbind:function(a){Z.list[a]=[]},bind:function(a,c){(Z.list[a]=Z.list[a]||[]).push(c)},fire:function(a,c){R(Z.list[a]||[],function(a){a(c)})}},Ga=sa("pubnub")||0,Ha=function(a){function c(){setTimeout(c,700*z);R(h,function(a){h[a]+700*z<H()&&delete h[a]})}XORIGN=0;var b=a.subscribe_key||"";a.uuid||Fa.get(b+"uuid");a.xdr=Da;a.db=Fa;a.error=ta;a._is_online=Ea;a.jsonp_cb=ya;var d=+a.ha||1,d=5<d?5:d,d=1>d?1:d,e=[],h={},b=[a.origin||"pubsub.pubnub.com","pubsub-naatl.pubnub.com","pubsub-emea.pubnub.com",
"pubsub-napac.pubnub.com","pubsub-saatl.pubnub.com","pubsub-apac.pubnub.com","pubsub-namer.pubnub.com","pubsub-latam.pubnub.com","pubsub-euro.pubnub.com","pubsub-lta.pubnub.com","pubsub-ncsa.pubnub.com","pubsub-japa.pubnub.com","pubsub-ap.pubnub.com","pubsub-apj.pubnub.com","pubsub-japac.pubnub.com","pubsub-lac.pubnub.com","pubsub-na.pubnub.com","pubsub-noram.pubnub.com","pubsub-amer.pubnub.com","pubsub-ams.pubnub.com","pubsub-nala.pubnub.com","pubsub-alps.pubnub.com"];c();a.origin=b[0];e.push(T(a));
a.idle=t();a.error=t();a.connect=t();a.disconnect=t();a.reconnect=t();for(var p=1;d>p;p++)a.origin=b[p],e.push(T(a));var f=T(a);f.publish=function(a,b){function c(d){(a.callback||b||t())(d)}var d=Q();e[0].publish(a,c);a.channel+="-ha";a.message={u:d,payload:a.message};R(e,function(b){a.message.o=b.origin();b.publish(a,c)})};f.subscribe=function(a,b){var c=a.channel,f=[];R((c.join?c.join(","):""+c).split(","),function(a){f.push(a+"-ha")});1<d&&(a.channel=f);R(e,function(c){c.subscribe(a,function(d,
e,f){a:{var g=c.origin();if("object"===typeof d&&"u"in d){var i=d.u,p=s;i in h&&(p=!0);h[i]=H();if(p)break a;d.rx=g;d=d.payload}(a.callback||a.message||b||t())(d,e,f)}})})};f.css=wa;f.$=sa;f.create=xa;f.bind=W;f.head=va;f.search=ua;f.attr=X;f.events=Z;f.init=Ha;W("beforeunload",window,function(){f["each-channel"](function(a){f.LEAVE(a.name,1)});return!0});if(a.notest)return f;W("offline",window,f.offline);W("offline",document,f.offline);return f};W("load",window,function(){setTimeout(ra,0)});var $=
Ga||{};PUBNUB=Ha({notest:1,publish_key:X($,"pub-key"),subscribe_key:X($,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==X($,"ssl"),origin:X($,"origin"),uuid:X($,"uuid")})}
var Ia=PUBNUB.ws=function(a,c){if(!(this instanceof Ia))return new Ia(a,c);var b=this,a=b.url=a||"";b.protocol=c||"Sec-WebSocket-Protocol";var d=a.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};b.CONNECTING=0;b.OPEN=1;b.CLOSING=2;b.CLOSED=3;b.CLOSE_NORMAL=1E3;b.CLOSE_GOING_AWAY=1001;b.CLOSE_PROTOCOL_ERROR=1002;b.CLOSE_UNSUPPORTED=1003;b.CLOSE_TOO_LARGE=1004;b.CLOSE_NO_STATUS=1005;b.CLOSE_ABNORMAL=1006;b.onclose=b.onerror=b.onmessage=b.onopen=b.onsend=
t();b.binaryType="";b.extensions="";b.bufferedAmount=0;b.trasnmitting=s;b.buffer=[];b.readyState=b.CONNECTING;if(!a)return b.readyState=b.CLOSED,b.onclose({code:b.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!0}),b;b.f=PUBNUB.init(d);b.f.m=d;b.m=d;b.f.subscribe({restore:s,channel:d.channel,disconnect:b.onerror,reconnect:b.onopen,error:function(){b.onclose({code:b.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:s})},callback:function(a){b.onmessage({data:a})},connect:function(){b.readyState=b.OPEN;b.onopen()}})};
})();
